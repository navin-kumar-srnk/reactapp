resources:
- name: my-app-repo
  type: git
  source:
    icon: github
    uri: https://github.com/navin-kumar-srnk/reactapp.git
    branch: master
    username: naveen
    password: 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

- name: built-image
  type: docker-image
  source:
    repository: navin621/test



jobs:
- name: docker-build
  plan:
  - get: my-app-repo
    trigger: true
  - task: npm-install-and-npm-build 
    config:
      platform: linux
      image_resource:
        type: docker-image
        source:
          repository: node
          tag: 18
      inputs: 
        - name: my-app-repo 
      outputs:
        - name: my-app-repo 
      run:
          path: my-app-repo/test/scripts/test.sh 
  - task: build-docker 
    config:
      platform: linux
      image_resource:
        type: docker-image
        source:
          repository: nginx
          tag: 'latest'
      inputs: 
        - name: my-app-repo 
      outputs:
        - name: image  
      run:
        path: my-app-repo/test/scripts/dockerbuild.sh
  

- name: build
  plan:
  - get: my-app-repo
  - put: built-image
    params:
      build: my-app-repo       

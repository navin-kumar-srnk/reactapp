resources:
- name: my-app-repo
  type: git
  source:
    icon: github
    uri: https://github.com/navin-kumar-srnk/reactapp.git
    branch: master
    username: naveen
    password: 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

- name: reactnginximage
  type: docker-image
  source:
    email: naveenk9731@gmail.com
    username: navin621
    password: Navin@621
    repository: navin621/test



jobs:
- name: docker-build
  plan:
  - get: my-app-repo
    trigger: true
  - task: npm-install-and-npm-build 
    config:
      platform: linux
      image_resource:
        type: docker-image
        source:
          repository: node
          tag: 'latest'
      inputs: 
        - name: my-app-repo 
      outputs:
        - name: my-app-repo
      puts: my-app-repo
      run:
          path: my-app-repo/test/scripts/test.sh 

- name: publish
  plan:
  - get: my-app-repo
    trigger: true
  - put: reactnginximage
    params:
      build: my-app-repo/test/Docker/.
